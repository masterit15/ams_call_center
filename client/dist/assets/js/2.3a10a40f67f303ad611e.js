(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{67:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-toolbar",{staticClass:"mb-1",attrs:{dark:"",color:"indigo darken-3"}},[s("v-btn-toggle",{attrs:{mandatory:""},model:{value:t.sortIsmain,callback:function(e){t.sortIsmain=e},expression:"sortIsmain"}},[s("v-btn",{attrs:{large:"",depressed:"",color:"blue",value:"main"}},[t._v("\n          Мои\n        ")]),t._v(" "),s("v-btn",{attrs:{large:"",depressed:"",color:"blue",value:"all"}},[t._v("\n          Все\n        ")])],1),t._v(" "),s("v-spacer"),t._v(" "),s("v-col",{attrs:{cols:"2"}},[s("v-select",{attrs:{items:t.searchParam,label:"Искать по:",flat:"","solo-inverted":"","hide-details":""},model:{value:t.searchParamVal,callback:function(e){t.searchParamVal=e},expression:"searchParamVal"}})],1),t._v(" "),s("v-col",{attrs:{cols:"3"}},[s("v-text-field",{attrs:{clearable:"",flat:"","solo-inverted":"","hide-details":"","prepend-inner-icon":"fa-search",label:"Поиск"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),t.$vuetify.breakpoint.mdAndUp?[s("v-spacer"),t._v(" "),s("v-col",{attrs:{cols:"3"}},[s("v-select",{attrs:{flat:"","solo-inverted":"","hide-details":"",items:t.postsstatus,"prepend-inner-icon":"fa-filter",label:"Фильтр по"},model:{value:t.sortBy,callback:function(e){t.sortBy=e},expression:"sortBy"}})],1),t._v(" "),s("v-spacer"),t._v(" "),s("v-btn-toggle",{attrs:{mandatory:""},model:{value:t.sortDesc,callback:function(e){t.sortDesc=e},expression:"sortDesc"}},[s("v-btn",{attrs:{large:"",depressed:"",color:"blue",value:!1}},[s("v-icon",[t._v("fa-chevron-up")])],1),t._v(" "),s("v-btn",{attrs:{large:"",depressed:"",color:"blue",value:!0}},[s("v-icon",[t._v("fa-chevron-down")])],1)],1)]:t._e()],2),t._v(" "),t.postloading?s("div",{staticClass:"post_loader"},[s("div",{staticClass:"loader"},[s("v-progress-circular",{attrs:{size:70,width:7,color:"purple",indeterminate:""}})],1)]):t._e(),t._v(" "),s("v-container",[s("v-snackbar",{attrs:{"multi-line":t.multiLine,timeout:2e3,color:t.snackbarcolor,top:"top"===t.snackbar_y,right:"right"===t.snackbar_x},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n      "+t._s(t.snackbarText)+"\n      "),s("v-btn",{attrs:{color:"red",text:""},on:{click:function(e){t.snackbar=!1}}},[s("v-icon",[t._v("fa-times-circle")])],1)],1),t._v(" "),s("v-row",t._l(t.posts,(function(e,a){return s("v-col",{key:a,attrs:{cols:"12",sm:"6",md:"4",lg:"4"}},[s("v-card",{staticClass:"mx-auto",attrs:{"min-height":"460"}},[s("v-toolbar",{attrs:{dark:"",color:t.statuscolor(e.selectstatus)}},[s("v-toolbar-title",[t._v(t._s(e.selectstatus))])],1),t._v(" "),s("v-card-title",{staticClass:"subtitle-2",attrs:{color:"#26c6da"}},[t._v("ФИО: "+t._s(e.fio))]),t._v(" "),s("v-divider",{staticClass:"mx-4"}),t._v(" "),s("v-card-subtitle",[s("span",[s("strong",[t._v("Дата:")]),t._v("\n              "+t._s(t._f("moment")(e.creDate,"YYYY-MM-DD в HH:mm:ss"))+"\n            ")]),t._v(" "),s("v-divider"),t._v(" "),s("span",[s("strong",[t._v("Контрольная дата:")]),t._v("\n              "+t._s(t._f("moment")(e.conDate,"YYYY-MM-DD в HH:mm:ss"))+"\n            ")]),t._v(" "),s("v-divider"),t._v(" "),s("span",[s("strong",[t._v("Телефон:")]),t._v("\n              "+t._s(e.phoneNumber)+"\n            ")]),t._v(" "),s("v-divider"),t._v(" "),s("span",[s("strong",[t._v("Адрес:")]),t._v("\n              "+t._s(e.address)+"\n            ")]),t._v(" "),s("v-divider"),t._v(" "),s("span",[s("strong",[t._v("Номер обращения:")]),t._v("\n              "+t._s(e.regNumber)+"\n            ")]),t._v(" "),s("v-divider")],1),t._v(" "),s("v-card-actions",[s("v-btn",{attrs:{disabled:t.showText(a),icon:""},on:{click:function(e){t.eYndex=a}}},[s("v-icon",[t._v(t._s(t.showText(a)?"fa-chevron-up":"fa-chevron-down"))])],1),t._v(" "),s("v-spacer"),t._v(" "),s("v-btn",{attrs:{color:"green",icon:""},on:{click:function(s){return t.openEditForm(e,a)}}},[s("v-icon",[t._v("fa-pencil-square-o")])],1),t._v(" "),s("v-btn",{attrs:{color:"red",icon:""},on:{click:function(s){return t.deletePost(e._id,a)}}},[s("v-icon",[t._v("fa-trash")])],1)],1),t._v(" "),s("v-expand-transition",[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showText(a),expression:"showText(index)"}]},[s("v-divider"),t._v(" "),s("v-card-text",[t._v(t._s(e.text))]),t._v(" "),s("v-btn",{attrs:{text:"",block:""},on:{click:function(e){t.eYndex=null}}},[s("v-icon",[t._v("fa-chevron-up")])],1)],1)])],1)],1)})),1),t._v(" "),t.pageLength>=2?s("v-row",{staticClass:"mt-2",attrs:{align:"center",justify:"center"}},[s("span",{staticClass:"grey--text"},[t._v("Элементов на странице")]),t._v(" "),s("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-btn",t._g({staticClass:"ml-2",attrs:{dark:"",text:"",color:"primary"}},a),[t._v("\n            "+t._s(t.limit)+"\n            "),s("v-icon",[t._v("mdi-chevron-down")])],1)]}}],null,!1,786120746)},[t._v(" "),s("v-list",t._l(t.itemsPerPageArray,(function(e,a){return s("v-list-item",{key:a,on:{click:function(s){return t.updateItemsPerPage(e)}}},[s("v-list-item-title",[t._v(t._s(e))])],1)})),1)],1),t._v(" "),s("v-spacer"),t._v(" "),s("v-pagination",{attrs:{length:t.pageLength,"total-visible":t.limit},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1):t._e()],1),t._v(" "),s("transition",{attrs:{name:"slide-editform"}},[t.editor?s("div",{staticClass:"add_form elevation-20"},[s("div",{staticClass:"add_form_close",attrs:{elevation:7}},[s("v-btn",{attrs:{icon:"",color:"error"},on:{click:function(e){t.editor=!1}}},[s("v-icon",[t._v("fa-close")])],1)],1),t._v(" "),s("v-divider"),t._v(" "),s("v-form",{ref:"form"},[s("v-container",{attrs:{fluid:""}},[s("v-alert",{attrs:{border:"left","close-text":"Закрыть",color:"light-green accent-1",dark:"",dismissible:""},model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[t._v(t._s(t.alertText))]),t._v(" "),s("v-row",[s("v-col",{attrs:{cols:"12",sm:"6"}},[s("v-text-field",{attrs:{label:"Регистр. номер","prepend-icon":"fa-address-card-o"},model:{value:t.post.regNumber,callback:function(e){t.$set(t.post,"regNumber",e)},expression:"post.regNumber"}})],1),t._v(" "),s("v-col",{attrs:{cols:"12",sm:"6"}},[s("v-select",{attrs:{items:t.status,label:"Статус","prepend-icon":"fa-share"},model:{value:t.post.selectstatus,callback:function(e){t.$set(t.post,"selectstatus",e)},expression:"post.selectstatus"}})],1),t._v(" "),s("v-col",{attrs:{cols:"12",sm:"6"}},[s("v-menu",{ref:"create_date",attrs:{"close-on-content-click":!1,"return-value":t.post.creDate,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(e){return t.$set(t.post,"creDate",e)},"update:return-value":function(e){return t.$set(t.post,"creDate",e)}},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-text-field",t._g({attrs:{label:"Дата создания","prepend-icon":"fa-calendar",readonly:""},model:{value:t.post.creDate,callback:function(e){t.$set(t.post,"creDate",e)},expression:"post.creDate"}},a))]}}],null,!1,1058766379),model:{value:t.post.create_date,callback:function(e){t.$set(t.post,"create_date",e)},expression:"post.create_date"}},[t._v(" "),s("v-date-picker",{attrs:{"no-title":"",scrollable:"",locale:"ru"},model:{value:t.post.creDate,callback:function(e){t.$set(t.post,"creDate",e)},expression:"post.creDate"}},[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.post.create_date=!1}}},[t._v("Закрыть")]),t._v(" "),s("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.create_date.save(t.post.creDate)}}},[t._v("Сохранить")])],1)],1)],1),t._v(" "),s("v-col",{attrs:{cols:"12",sm:"6"}},[s("v-menu",{ref:"control_date",attrs:{"close-on-content-click":!1,"return-value":t.post.conDate,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(e){return t.$set(t.post,"conDate",e)},"update:return-value":function(e){return t.$set(t.post,"conDate",e)}},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-text-field",t._g({attrs:{label:"Контрольная дата","prepend-icon":"fa-calendar",readonly:""},model:{value:t.post.conDate,callback:function(e){t.$set(t.post,"conDate",e)},expression:"post.conDate"}},a))]}}],null,!1,627422411),model:{value:t.post.control_date,callback:function(e){t.$set(t.post,"control_date",e)},expression:"post.control_date"}},[t._v(" "),s("v-date-picker",{attrs:{"no-title":"",scrollable:"",locale:"ru"},model:{value:t.post.conDate,callback:function(e){t.$set(t.post,"conDate",e)},expression:"post.conDate"}},[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.post.control_date=!1}}},[t._v("Закрыть")]),t._v(" "),s("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.control_date.save(t.post.conDate)}}},[t._v("Сохранить")])],1)],1)],1),t._v(" "),s("v-spacer"),t._v(" "),s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{label:"ФИО","prepend-icon":"fa-user"},model:{value:t.post.fio,callback:function(e){t.$set(t.post,"fio",e)},expression:"post.fio"}})],1),t._v(" "),s("v-col",{attrs:{cols:"12"}},[s("v-combobox",{attrs:{items:t.addressArr,loading:t.loading,"search-input":t.addresssearch,label:"Адрес","prepend-icon":"fa-map-marker"},on:{"update:searchInput":function(e){t.addresssearch=e},"update:search-input":function(e){t.addresssearch=e}},model:{value:t.post.address,callback:function(e){t.$set(t.post,"address",e)},expression:"post.address"}})],1),t._v(" "),s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{label:"Номер телефона","prepend-icon":"fa-phone"},model:{value:t.post.phoneNumber,callback:function(e){t.$set(t.post,"phoneNumber",e)},expression:"post.phoneNumber"}})],1),t._v(" "),s("v-col",{attrs:{cols:"12"}},[s("v-textarea",{attrs:{name:"input-7-1",label:"Текст обращения","prepend-icon":"fa-pencil-square-o",value:"",hint:""},model:{value:t.post.text,callback:function(e){t.$set(t.post,"text",e)},expression:"post.text"}})],1)],1),t._v(" "),s("v-card-actions",[s("v-btn",{attrs:{loading:t.saveLoader,disabled:t.saveLoader,color:"info"},on:{click:function(e){t.loader="saveLoader",t.editPost(t.post)}},scopedSlots:t._u([{key:"loader",fn:function(){return[s("span",{staticClass:"custom-loader"},[s("v-icon",{attrs:{light:""}},[t._v("fa-refresh")])],1)]},proxy:!0}],null,!1,121998401)},[t._v("\n              Сохранить\n              ")]),t._v(" "),s("v-btn",{attrs:{color:"error"},on:{click:function(e){t.editor=!1}}},[t._v("закрыть")])],1)],1)],1)],1):t._e()])],1)};a._withStripped=!0;var r=s(5),o=s.n(r),n=(s(1),s(29)),c=s(4);function i(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function l(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?i(Object(s),!0).forEach((function(e){o()(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var v={data:function(){return{eYndex:null,loader:null,postloading:!0,alert:!1,alertText:"",post:{},states:[],addressArr:[],addresssearch:null,status:["Все","Не обработанная","В работе","Обработанная"],searchParam:["по ФИО","по мобильному","по телефону","по адресу","по тексту обращения"],searchParamVal:"fio",loading:!1,saveLoader:!1,editor:!1,snackbar:!1,multiLine:!0,snackbar_x:null,snackbar_y:"top",snackbarcolor:"info",snackbarText:"",search:"",sortDesc:!1,sortBy:"Все",sortIsmain:"all",editMode:!1,itemsPerPageArray:[6,9,12],items:[],page:1,limit:6,pageLength:0,maploader:null,maps:null}},watch:{sortIsmain:function(){this.getPosts()},searchParamVal:function(){switch(this.searchParamVal){case"по ФИО":this.searchParamVal="fio";break;case"по мобильному":this.searchParamVal="mobileNumber";break;case"по телефону":this.searchParamVal="phoneNumber";break;case"по адресу":this.searchParamVal="address";break;case"по тексту обращения":this.searchParamVal="text"}},search:function(){this.getPosts()},sortBy:function(){this.getPosts()},page:function(){this.getPosts()},pagination:function(){this.pageLength=this.pagination.pageCount},limit:function(){this.getPosts()},addresssearch:function(t){t&&t!==this.post.address&&this.querySelections(t)},message:function(){""!=this.message&&(this.snackbarText=this.message,this.snackbar=!0)},sortDesc:function(){var t=this.sortDesc;this.posts.sort((function(e,s){return t?new Date(s.creDate)-new Date(e.creDate):new Date(e.creDate)-new Date(s.creDate)}))},loader:function(){var t=this,e=this.loader;this[e]=!this[e],setTimeout((function(){t[e]=!1,t.menu=!1,t.editor=!1}),2e3),this.loader=null}},created:function(){this.initializeYandexMap(),this.getPosts()},updated:function(){0==this.posts.length?this.postloading=!0:this.postloading=!1},computed:l({},Object(c.c)(["posts","postsstatus","message","pagination"])),methods:l({showText:function(t){return this.eYndex==t},getPosts:function(){var t={status:this.sortBy,pagin:{page:this.page,limit:this.limit,searchparam:this.searchParamVal,search:this.search,sortIsmain:this.sortIsmain}};this.loadPost(t)}},Object(c.b)(["loadPost","editPost","deletePost"]),{statuscolor:function(t){switch(t){case"Не обработанная":return"red";case"В работе":return"amber";case"Обработанная":return"green"}},openEditForm:function(t){this.post=t,this.editor=!0},updateItemsPerPage:function(t){this.limit=t},initializeYandexMap:function(){var t=this;n.a.load("https://api-maps.yandex.ru/2.1/?apikey=256e028a-94b5-496f-b948-394772dc151a&lang=ru_RU").then((function(e){t.maps=e})).catch((function(t){return console.log("Ошибка!",t)}))},querySelections:function(t){var e=this;this.loading=!0,this.maps.suggest(t).then((function(s){for(var a=0;a<s.length;a++)e.states.push(s[a].value);e.addressArr=e.states.filter((function(s){return e.loading=!1,(s||"").toLowerCase().indexOf((t||"").toLowerCase())>-1}))}))}})},u=(s(78),s(2)),d=Object(u.a)(v,a,[],!1,null,"6a256646",null);d.options.__file="src/views/Applications.vue";e.default=d.exports},72:function(t,e,s){var a=s(8),r=s(79);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var o={insert:"head",singleton:!1},n=(a(t.i,r,o),r.locals?r.locals:{});t.exports=n},78:function(t,e,s){"use strict";var a=s(72);s.n(a).a},79:function(t,e,s){}}]);