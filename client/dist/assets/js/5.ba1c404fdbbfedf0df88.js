(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{66:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-snackbar",{attrs:{timeout:3e3,top:!0,right:!0},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n    "+e._s(e.message)+"\n    "),a("v-btn",{attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},[a("v-icon",[e._v("fa-times-circle")])],1)],1),e._v(" "),a("v-col",{attrs:{col:"12"}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({attrs:{color:"primary",dark:""}},s),[e._v("Добавить пользователя")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"green"}},[a("v-toolbar-title",[e._v("Добавить пользователя")])],1),e._v(" "),a("v-form",{on:{submit:function(t){return t.preventDefault(),e.addUser(e.authData)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-col",{attrs:{cols:"12"}}),e._v(" "),a("v-col",{attrs:{cols:"12"}},[a("ValidationProvider",{attrs:{name:"Login",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors,r=t.valid;return[a("v-text-field",{attrs:{"error-messages":s,success:r,label:"Логин",required:""},model:{value:e.authData.login,callback:function(t){e.$set(e.authData,"login",t)},expression:"authData.login"}})]}}])})],1),e._v(" "),a("v-col",{attrs:{cols:"12"}},[a("ValidationProvider",{attrs:{name:"Name",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors,r=t.valid;return[a("v-text-field",{attrs:{"error-messages":s,success:r,label:"ФИО",required:""},model:{value:e.authData.userName,callback:function(t){e.$set(e.authData,"userName",t)},expression:"authData.userName"}})]}}])})],1),e._v(" "),a("v-col",{attrs:{cols:"12"}},[a("ValidationObserver",[a("ValidationProvider",{attrs:{rules:"required|password:@confirm"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("v-text-field",{attrs:{"append-icon":e.showpassw?"fa-eye":"fa-eye-slash",type:e.showpassw?"text":"password","error-messages":s,label:"Пароль",hint:"Не менее 8 символов",counter:""},on:{"click:append":function(t){e.showpassw=!e.showpassw}},model:{value:e.authData.password,callback:function(t){e.$set(e.authData,"password",t)},expression:"authData.password"}})]}}])}),e._v(" "),a("ValidationProvider",{attrs:{name:"confirm",rules:"required|min:8"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("v-text-field",{attrs:{"append-icon":e.showpassw?"fa-eye":"fa-eye-slash",type:e.showpassw?"text":"password","error-messages":s,label:"Повторите пароль",counter:"",hint:"Не менее 8 символов"},on:{"click:append":function(t){e.showpassw=!e.showpassw}},model:{value:e.confirmation,callback:function(t){e.confirmation=t},expression:"confirmation"}})]}}])})],1)],1),e._v(" "),a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{items:e.permissionItems,label:"Роль пользователя"},model:{value:e.authData.permission,callback:function(t){e.$set(e.authData,"permission",t)},expression:"authData.permission"}})],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"red",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Закрыть")]),e._v(" "),a("v-btn",{attrs:{type:"submit",color:"green",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Сохранить")])],1)],1)],1)],1)],1),e._v(" "),a("v-col",{attrs:{col:"12"}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.editordialog,callback:function(t){e.editordialog=t},expression:"editordialog"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"green"}},[a("v-toolbar-title",[e._v("Добавить пользователя")])],1),e._v(" "),a("v-form",{on:{submit:function(t){return t.preventDefault(),e.editUse(e.authData)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-col",{attrs:{cols:"12"}}),e._v(" "),a("v-col",{attrs:{cols:"12"}},[a("ValidationProvider",{attrs:{name:"Login",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors,r=t.valid;return[a("v-text-field",{attrs:{"error-messages":s,success:r,label:"Логин",required:""},model:{value:e.authData.login,callback:function(t){e.$set(e.authData,"login",t)},expression:"authData.login"}})]}}])})],1),e._v(" "),a("v-col",{attrs:{cols:"12"}},[a("ValidationProvider",{attrs:{name:"Name",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors,r=t.valid;return[a("v-text-field",{attrs:{"error-messages":s,success:r,label:"ФИО",required:""},model:{value:e.authData.userName,callback:function(t){e.$set(e.authData,"userName",t)},expression:"authData.userName"}})]}}])})],1),e._v(" "),a("v-col",{attrs:{cols:"12"}},[a("ValidationObserver",[a("ValidationProvider",{attrs:{rules:"password:@confirm"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("v-text-field",{attrs:{"append-icon":e.showpassw?"fa-eye":"fa-eye-slash",type:e.showpassw?"text":"password","error-messages":s,label:"Пароль",hint:"Не менее 8 символов",counter:""},on:{"click:append":function(t){e.showpassw=!e.showpassw}},model:{value:e.authData.password,callback:function(t){e.$set(e.authData,"password",t)},expression:"authData.password"}})]}}])}),e._v(" "),a("ValidationProvider",{attrs:{name:"confirm",rules:"min:8"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("v-text-field",{attrs:{"append-icon":e.showpassw?"fa-eye":"fa-eye-slash",type:e.showpassw?"text":"password","error-messages":s,label:"Повторите пароль",counter:"",hint:"Не менее 8 символов"},on:{"click:append":function(t){e.showpassw=!e.showpassw}},model:{value:e.confirmation,callback:function(t){e.confirmation=t},expression:"confirmation"}})]}}])})],1)],1),e._v(" "),a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{items:e.permissionItems,label:"Роль пользователя"},model:{value:e.authData.permission,callback:function(t){e.$set(e.authData,"permission",t)},expression:"authData.permission"}})],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"red",text:""},on:{click:function(t){e.editordialog=!1}}},[e._v("Закрыть")]),e._v(" "),a("v-btn",{attrs:{type:"submit",color:"green",text:""},on:{click:function(t){e.editordialog=!1}}},[e._v("Сохранить")])],1)],1)],1)],1)],1)],1),e._v(" "),a("v-row",[a("v-col",{attrs:{col:"12"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"green"}},[a("v-toolbar-title",[e._v("Список пользователей")])],1),e._v(" "),a("v-simple-table",{attrs:{height:"400px"},scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",{attrs:{dense:!0,"fixed-header":!0}},[a("tr",[a("th",{attrs:{lass:"text-left"}},[e._v("Логин")]),e._v(" "),a("th",{attrs:{lass:"text-left"}},[e._v("ФИО")]),e._v(" "),a("th",{attrs:{lass:"text-left"}},[e._v("Роль")]),e._v(" "),a("th",{attrs:{lass:"text-left"}},[e._v("Действия")])])]),e._v(" "),a("tbody",e._l(e.users,(function(t,s){return a("tr",{key:s},[a("td",[e._v(e._s(t.login))]),e._v(" "),a("td",[e._v(e._s(t.userName))]),e._v(" "),a("td",[e._v(e._s(t.permission))]),e._v(" "),a("td",[a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(r){var o=r.on;return[a("v-btn",e._g({attrs:{color:"green",icon:""},on:{click:function(a){return e.openEditorUser(t,s)}}},o),[a("v-icon",[e._v("fa-pencil-square-o")])],1)]}}],null,!0)},[e._v(" "),a("span",[e._v("Редактировать")])]),e._v(" "),a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(r){var o=r.on;return[a("v-btn",e._g({attrs:{color:"red",icon:""},on:{click:function(a){return e.deleteUse(t._id,s)}}},o),[a("v-icon",[e._v("fa-trash")])],1)]}}],null,!0)},[e._v(" "),a("span",[e._v("Удалить")])])],1)])})),0)]},proxy:!0}])})],1)],1)],1)],1)};s._withStripped=!0;var r=a(6),o=a.n(r),n=a(5);a(1);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c={data:function(){return{pass:"",pass2:"",showpassw:!1,dialog:!1,editordialog:!1,valid:!1,editor:!1,permissionItems:["Администратор","Сотрудник"],fio:"",search:"",message:"",snackbar:!1,ifeditUser:!1,searchParam:["по ФИО"],searchParamVal:"fio",user:{},authData:{saveswitch:!1,login:"",userName:"",permission:"Сотрудник",password:""},page:1,limit:6,confirmation:""}},watch:{permissionItems:function(){switch(this.permissionItems){case"Администратор":this.authData.permission="admin";break;case"Сотрудник":this.authData.permission="employee"}}},created:function(){this.getAllUsers()},computed:l({},Object(n.c)(["users"])),methods:l({},Object(n.b)(["register","getUsers","editUser","deleteUser","getUser"]),{getAllUsers:function(){var e={page:this.page,limit:this.limit,searchparam:this.searchParamVal,search:this.search};this.getUsers(e)},addUser:function(e){var t=this;this.register(e).then((function(e){console.log(e),t.message=e.data.message,t.snackbar=!0,t.getAllUsers()})).catch((function(e){console.log(e),t.message=e,t.snackbar=!0}))},openEditorUser:function(e){e.password="",this.authData=e,this.editordialog=!0},editUse:function(e){var t=this;this.editUser(e).then((function(e){console.log(e),t.message=e.data.message,t.snackbar=!0,t.getAllUsers()})).catch((function(e){console.log(e),t.message=e,t.snackbar=!0}))},deleteUse:function(e){var t=this;this.deleteUser(e).then((function(e){console.log(e),t.message=e.data.message,t.snackbar=!0,t.getAllUsers()})).catch((function(e){console.log(e),t.message=e,t.snackbar=!0}))}})},u=(a(80),a(2)),d=Object(u.a)(c,s,[],!1,null,"68be103e",null);d.options.__file="src/views/Users.vue";t.default=d.exports},73:function(e,t,a){var s=a(9),r=a(81);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1},n=(s(e.i,r,o),r.locals?r.locals:{});e.exports=n},80:function(e,t,a){"use strict";var s=a(73);a.n(s).a},81:function(e,t,a){}}]);